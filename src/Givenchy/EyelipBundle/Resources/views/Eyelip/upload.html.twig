{% extends 'GivenchyEyelipBundle::index.html.twig' %} 
{% block content %}

<article class="dreambox">

	<!-- 图片上传页面 -->
	<section class="page" id="upload" style="display:inline-block;">
		<div class="con">

			<a href="javascript:;" class="logo">
				<img src="/images/logo.png" width="100%" />
			</a>
			
			<div class="uploadCon">
				<div class="photoShow">
					<div id="showImg">
						<img src="/images/place.jpg" width="100%" />
					</div>
					<a href="javascript:;" class="photoClose">
						<img src="/images/close.png" width="100%" />
					</a>
				</div>
				<ul class="upload_list">
					<li><input capture="camera" type="file" /><img src="/images/upload_place.png" width="100%" /></li>
 					<li><input capture="camera" type="file" /><img src="/images/upload_place.png" width="100%" /></li>
					<li><input capture="camera" type="file" /><img src="/images/upload_place.png" width="100%" /></li>
				</ul>

			</div>

			<div class="footer">
				<a href="javascript:;" class="btn upload_btn">
					<img src="/images/upload_btn.png" width="100%" />
				</a>
			</div>

		</div>
		<img src="/images/index_bg.jpg" width="100%" />
	</section>


</article>

<script type="text/javascript">

  
	$.fn.extend({          
	    pupOpen:function() {  
	    	$(".pupcon").hide();        
	        $("#pupbg").fadeIn();
	        $(this).show();     
	    },
	    pupClose:function() {  
	    	$("#pupbg").hide();  
	    	$(".pupcon").hide();         
	    },
	    pupInfo:function(infoImg){
	    	var proUrl = $(this).attr("data-pro");
	    	$(infoImg).attr("src", proUrl);
	    }     
	});  

	$(".prolist dt").click(function(){
		$("#proInfo").pupOpen(); 
		$(this).find("img").pupInfo("#proUrl");
	})

	



// Select all links
var links = document.querySelectorAll("input");

// For each link element
[].forEach.call(links, function(el) {

  // Add event listener
  el.addEventListener("change", function(event) {
    event.preventDefault();
    var that = this;
    lrz(that.files[0], {
        width: 1024
    })
        .then(function (rst) {
            var img        = new Image(),
                div        = document.createElement('div'),
                sourceSize = toFixed2(that.files[0].size / 1024),
                resultSize = toFixed2(rst.base64Len * 0.8 / 1024),
                scale      = parseInt(100 - (resultSize / sourceSize * 100));


            div.className = 'photoImg';
            div.appendChild(img);

            img.onload = function () {
                that.parentNode.appendChild(div);
            };

            img.src = rst.base64;
            $(img).css("width","100%");
            $("#showImg img").attr("src",rst.base64);

            return rst;
        });

  }, false);

});


function toFixed2 (num) {
    return parseFloat(+num.toFixed(2));
}


</script>


{% endblock %}